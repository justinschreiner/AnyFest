#section-settings.section-settings
    = form_with model: @template, id: "form-input", url: wizard_path, method: :put do |t|
        - @template.days.each do |day|
            = t.fields_for :days, day do |d|
                #accordionDay.accordion
                    #instance
                        #dayHeading
                            %h2.mb-0
                                %a#dayAccordionHeader{"aria-controls": "collapseDay", "aria-expanded": "true", "href": "#collapseDay", "data-toggle": "collapse", "type": "button"}
                                    Day Settings
                        #collapseDay.collapse.show{"aria-labelledby": "dayHeading", "data-parent": "#accordionDay"}
                            %div{ data: {controller: "daybox", daybox_height: day.height, daybox_width: day.width, daybox_x_offset: day.x_offset, daybox_y_offset: day.y_offset}}
                                .form-content.row
                                    .form.col
                                        .label= d.label :name
                                        %a#popover{class: "day-name-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                        "data-content": "Name this day. Ex: Saturday"}
                                            #popover-icon
                                                = fa_icon "info-circle"
                                        = d.text_field :name, class: "form-control input-lg", id: "name"
                                        %a.btn.btn-primary#innerDayCollapse{"aria-controls": "collapseDay", "aria-expanded": "true", "href": "#collapseDay", "data-toggle": "collapse", "type": "button"}
                                            HIDE
                                    .container.col{"data-target": "daybox.output"}
                                        = image_tag(@template.background_image, class: "preview_image image img-fluid")
                - day.sections.each do |section|
                    = d.fields_for :sections, section do |s|
                        #accordionSection.accordion
                            #instance
                                #sectionHeading
                                    %h2.mb-0
                                        %a#sectionAccordionHeader{"aria-controls": "collapseSection", "aria-expanded": "true", "href": "#collapseSection", "data-toggle": "collapse", "type": "button"}
                                            Section Settings
                                #collapseSection.collapse.show{"aria-labelledby": "sectionHeading", "data-parent": "#accordionSection"}
                                    %div{ data: {controller: "sectionbox", sectionbox_day_height: day.height, sectionbox_day_width: day.width, sectionbox_day_x_offset: day.x_offset, sectionbox_day_y_offset: day.y_offset, sectionbox_section_height: section.height, sectionbox_section_width: section.width, sectionbox_section_x_offset: section.x_offset, sectionbox_section_y_offset: section.y_offset}}
                                        .form-content.row
                                            .form.col
                                                .label= s.label :name
                                                %a#popover{class: "sec-name-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                                "data-content": "Name this section. Ex: Saturday Headliners"}
                                                    #popover-icon
                                                        = fa_icon "info-circle"
                                                = s.text_field :name, class: "form-control input-lg name"
                                                .row
                                                    .label= s.label :alternating_colors
                                                    %a#popover{class: "alt-colors-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                                    "data-content": "Check this box if this section uses alternating text colors.  Then add colors in the order you'd like them to alternate in."}
                                                        #popover-icon
                                                            = fa_icon "info-circle"
                                                    = s.check_box :alternating_colors, class: "form-check-input alternating-color", onchange: "collapseAddColor(this)", id: "alternating-color"
                                                .color-fields    
                                                    = s.label :text_colors
                                                    = s.color_field :text_colors, class: "form-control input-lg text-color"
                                                    .collapse#colors
                                                        %button.add-button{ onclick: "addColorField(this)" }
                                                            = fa_icon "plus-square"
                                                .row
                                                    .col
                                                        = s.label :font
                                                        %a#popover{class: "font-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                                        "data-content": '<div class="sora"> SORA </div><div class="oswald"> OSWALD </div><div class="signika"> SIGNIKA </div><div class="nunito"> NUNITO </div><div class="work-sans"> WORK SANS </div><div class="heebo"> HEEBO </div><div class="roboto-slab"> ROBOTO SLAB </div><div class="rokkitt"> ROKKITT </div>', "data-html": "true"}
                                                            #popover-icon
                                                                = fa_icon "info-circle"
                                                        = s.select :font, @fonts, {}, class: "form-control font"
                                                    .col
                                                        = s.label :weight
                                                        = s.select :weight, @weights, {}, class: "form-control weight"
                                                .row
                                                    .col
                                                        = s.label :delineator
                                                        %a#popover{class: "delineator-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                                        "data-content": "This symbol will be placed between each artist."}
                                                            #popover-icon
                                                                = fa_icon "info-circle"
                                                        = s.select :delineator, ['Â·', '/', '|', ''], {}, class: "form-control delineator"
                                                    .col
                                                        = s.label :delineator_color
                                                        = s.color_field :delineator_color, class: "form-control input-lg delineator-color"
                                                = s.label :max_act_count
                                                %a#popover{class: "max-popover", "data-container": "body", "data-toggle": "popover", "data-placement": "right", 
                                                "data-content": "Enter the maximum number of acts that should be allowed in this section."}
                                                    #popover-icon
                                                        = fa_icon "info-circle"
                                                = s.number_field :max_act_count, min: 1, class: "form-control input-lg max_acts"
                                                %a.btn.btn-primary#innerSectionCollapse{"aria-controls": "collapseSection", "aria-expanded": "true", "href": "#collapseSection", "data-toggle": "collapse", "type": "button"}
                                                    HIDE
                                            .container.col{"data-target": "sectionbox.output"}
                                                = image_tag(@template.background_image, class: "preview_image img-fluid")
        = t.submit "CONTINUE", class: "btn btn-primary"